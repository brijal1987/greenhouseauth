{"ast":null,"code":"var _jsxFileName = \"/Users/brijalsavaliya/brijal/brijalsavaliya/techholding/Backup/greenhouseauth/src/App.js\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"; // import { BrowserRouter, Route, Switch, withRouter } from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Header from './components/Header/Header';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport Home from './components/Home/Home';\nimport copy from './copy';\nimport Login from \"./components/Login/Login\";\nimport Register from \"./components/Register/Register\";\nimport axios from \"axios\";\nimport $ from \"jquery\";\n\nclass App extends Component {\n  constructor() {\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    };\n  }\n\n  componentDidMount() {\n    let state = localStorage[\"appState\"];\n\n    if (state) {\n      let AppState = JSON.parse(state);\n      console.log(AppState);\n      this.setState({\n        isLoggedIn: AppState.isLoggedIn,\n        user: AppState\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state.isLoggedIn);\n    console.log(\"path name: \" + this.props.location.pathname);\n\n    if (!this.state.isLoggedIn && this.props.location.pathname !== \"/login\" && this.props.location.pathname !== \"/register\") {\n      console.log(\"you are not loggedin and are not visiting login or register, so go to login page\");\n      this.props.history.push(\"/login\");\n    }\n\n    if (this.state.isLoggedIn && (this.props.location.pathname === \"/login\" || this.props.location.pathname === \"/register\")) {\n      console.log(\"you are either going to login or register but youre logged in\");\n      this.props.history.push(\"/\");\n    }\n\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Header, {\n      copy: copy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9 box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => React.createElement(Home, Object.assign({}, props, {\n        logoutUser: this._logoutUser,\n        user: this.state.user,\n        copy: copy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      render: props => React.createElement(Login, Object.assign({}, props, {\n        loginUser: this._loginUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/register\",\n      render: props => React.createElement(Register, Object.assign({}, props, {\n        registerUser: this._registerUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/about\",\n      component: About,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-md-3 box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Sidebar, {\n      copy: copy,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nfunction About() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, \"About\"));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/brijalsavaliya/brijal/brijalsavaliya/techholding/Backup/greenhouseauth/src/App.js"],"names":["React","Component","BrowserRouter","Router","Route","Header","Sidebar","Home","copy","Login","Register","axios","$","App","constructor","state","isLoggedIn","user","componentDidMount","localStorage","AppState","JSON","parse","console","log","setState","render","props","location","pathname","history","push","_logoutUser","_loginUser","_registerUser","About"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n// import { BrowserRouter, Route, Switch, withRouter } from \"react-router-dom\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Header  from './components/Header/Header';\nimport Sidebar  from './components/Sidebar/Sidebar';\nimport Home  from './components/Home/Home';\nimport copy from './copy';\n\nimport Login from \"./components/Login/Login\";\nimport Register from \"./components/Register/Register\";\n\nimport axios from \"axios\";\nimport $ from \"jquery\";\n\nclass App extends Component {\n\n  constructor() {\n    this.state = {\n      isLoggedIn: false,\n      user: {}\n    };\n  }\n\n  componentDidMount() {\n    let state = localStorage[\"appState\"];\n    if (state) {\n      let AppState = JSON.parse(state);\n      console.log(AppState);\n      this.setState({ isLoggedIn: AppState.isLoggedIn, user: AppState });\n    }\n  }\n\n  _loginUser = (email, password) => {\n    $(\"#login-form button\")\n      .attr(\"disabled\", \"disabled\")\n      .html(\n        '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\n      );\n    var formData = new FormData();\n    formData.append(\"email\", email);\n    formData.append(\"password\", password);\n\n    axios\n      .post(\"http://localhost:8001/api/user/login/\", formData)\n      .then(response => {\n        console.log(response);\n        return response;\n      })\n      .then(json => {\n        if (json.data.success) {\n          alert(\"Login Successful!\");\n\n          let userData = {\n            name: json.data.data.name,\n            id: json.data.data.id,\n            email: json.data.data.email,\n            auth_token: json.data.data.auth_token,\n            timestamp: new Date().toString()\n          };\n          let appState = {\n            isLoggedIn: true,\n            user: userData\n          };\n          // save app state with user date in local storage\n          localStorage[\"appState\"] = JSON.stringify(appState);\n          this.setState({\n            isLoggedIn: appState.isLoggedIn,\n            user: appState.user\n          });\n        } else alert(\"Login Failed!\");\n\n        $(\"#login-form button\")\n          .removeAttr(\"disabled\")\n          .html(\"Login\");\n      })\n      .catch(error => {\n        alert(`An Error Occured! ${error}`);\n        $(\"#login-form button\")\n          .removeAttr(\"disabled\")\n          .html(\"Login\");\n      });\n  };\n\n  _registerUser = (name, email, password) => {\n    $(\"#email-login-btn\")\n    .attr(\"disabled\", \"disabled\")\n    .html(\n    '<i class=\"fa fa-spinner fa-spin fa-1x fa-fw\"></i><span class=\"sr-only\">Loading...</span>'\n    );\n\n    var formData = new FormData(); \n    formData.append(\"password\", password);\n    formData.append(\"email\", email);\n    formData.append(\"name\", name);\n\n    axios\n    .post(\"http://localhost:8001/api/user/register\", formData)\n    .then(response => {\n    console.log(response);\n    return response;\n    })\n    .then(json => {\n    if (json.data.success) {\n        alert(`Registration Successful!`);\n\n        let userData = {\n        name: json.data.data.name,\n        id: json.data.data.id,\n        email: json.data.data.email,\n        auth_token: json.data.data.auth_token,\n        timestamp: new Date().toString()\n        };\n        let appState = {\n        isLoggedIn: true,\n        user: userData\n        };\n        // save app state with user date in local storage\n        localStorage[\"appState\"] = JSON.stringify(appState);\n        this.setState({\n        isLoggedIn: appState.isLoggedIn,\n        user: appState.user\n        });\n    } else {\n        alert(`Registration Failed!`);\n        $(\"#email-login-btn\")\n        .removeAttr(\"disabled\")\n        .html(\"Register\");\n    }\n    })\n    .catch(error => {\n    alert(\"An Error Occured!\" + error);\n    console.log(`${formData} ${error}`);\n    $(\"#email-login-btn\")\n        .removeAttr(\"disabled\")\n        .html(\"Register\");\n    });\n  };\n\n  _logoutUser = () => {\n  let appState = {\n    isLoggedIn: false,\n    user: {}\n  };\n  // save app state with user date in local storage\n  localStorage[\"appState\"] = JSON.stringify(appState);\n  this.setState(appState);\n  };\n\n  render() {\n    console.log(this.state.isLoggedIn);\n    console.log(\"path name: \" + this.props.location.pathname);\n    if (\n      !this.state.isLoggedIn &&\n      this.props.location.pathname !== \"/login\" &&\n      this.props.location.pathname !== \"/register\"\n    ) {\n      console.log(\n        \"you are not loggedin and are not visiting login or register, so go to login page\"\n      );\n      this.props.history.push(\"/login\");\n    }\n    if (\n      this.state.isLoggedIn &&\n      (this.props.location.pathname === \"/login\" ||\n        this.props.location.pathname === \"/register\")\n    ) {\n      console.log(\n        \"you are either going to login or register but youre logged in\"\n      );\n\n      this.props.history.push(\"/\");\n    }\n    return (\n      <Router>\n        <div className=\"App\">\n          <Header copy={copy}></Header>\n          <div className=\"row\">\n            <div className=\"col-md-9 box\">\n              <div className=\"inner\">\n                <Route\n                  exact\n                  path=\"/\"\n                  render={props => (\n                    <Home\n                      {...props}\n                      logoutUser={this._logoutUser}\n                      user={this.state.user}\n                      copy={copy}\n                    />\n                  )}\n                />\n                <Route\n                  path=\"/login\"\n                  render={props => <Login {...props} loginUser={this._loginUser} />}\n                />\n\n                <Route\n                  path=\"/register\"\n                  render={props => (\n                    <Register {...props} registerUser={this._registerUser} />\n                  )}\n                />\n                <Route path=\"/about\" component={About} />\n              </div>\n            </div>\n            <div className=\"col-md-3 box\">\n              <div className=\"inner\">\n                <Sidebar copy={copy}></Sidebar>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Router>\n    );\n  }\n}\n\nfunction About() {\n  return (\n    <div>\n      <h2>About</h2>\n    </div>\n  );\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}